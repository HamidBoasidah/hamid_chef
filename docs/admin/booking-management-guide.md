# دليل إدارة الحجوزات - Admin Booking Management Guide

## نظرة عامة

يوفر نظام إدارة الحجوزات أدوات شاملة لإدارة حجوزات الطهاة مع منع التعارض وضمان الفواصل الزمنية المطلوبة. يتضمن النظام ميزات متقدمة لمنع حالات السباق (Race Conditions) وضمان سلامة البيانات.

## الوصول إلى النظام

### تسجيل الدخول
1. انتقل إلى `/admin`
2. أدخل بيانات الاعتماد الخاصة بك
3. ستتم إعادة توجيهك إلى لوحة إدارة الحجوزات

### الصلاحيات المطلوبة
- صلاحية الإدارة (Admin Role)
- صلاحية إدارة الحجوزات

## إدارة الحجوزات

### 1. عرض قائمة الحجوزات

#### الوصول
- انتقل إلى **الحجوزات** > **عرض الكل**
- أو استخدم الرابط المباشر: `/admin/bookings`

#### الميزات المتاحة
- **البحث**: ابحث بالاسم، البريد الإلكتروني، أو رقم الحجز
- **التصفية**: فلتر حسب الحالة، تاريخ الحجز، أو الطاهي
- **الترتيب**: رتب حسب التاريخ، المبلغ، أو الحالة
- **التصدير**: صدر البيانات إلى Excel أو PDF

#### أعمدة الجدول
| العمود | الوصف |
|--------|-------|
| رقم الحجز | معرف فريد للحجز |
| العميل | اسم العميل وبياناته |
| الطاهي | اسم الطاهي المحجوز |
| التاريخ والوقت | تاريخ ووقت الحجز |
| المبلغ الإجمالي | إجمالي تكلفة الحجز |
| الحالة | حالة الحجز الحالية |
| الإجراءات | أزرار العرض والتعديل |

### 2. إنشاء حجز جديد

#### الخطوات
1. انقر على **إنشاء حجز جديد**
2. املأ النموذج بالبيانات المطلوبة
3. سيتم فحص التعارض تلقائياً
4. انقر **حفظ** لإنشاء الحجز

#### البيانات المطلوبة
- **العميل**: اختر من قائمة العملاء المسجلين
- **الطاهي**: اختر الطاهي المطلوب
- **الخدمة**: اختر نوع الخدمة
- **التاريخ**: تاريخ الحجز (لا يمكن أن يكون في الماضي)
- **وقت البداية**: وقت بداية الخدمة (8 ص - 10 م)
- **عدد الساعات**: مدة الخدمة (1-12 ساعة)
- **عدد الضيوف**: عدد الأشخاص
- **العنوان**: عنوان تقديم الخدمة
- **ملاحظات**: أي ملاحظات خاصة

#### فحص التعارض التلقائي
- يتم فحص التعارض مع الحجوزات الموجودة
- يتم التأكد من وجود فاصل زمني 2 ساعة على الأقل
- عرض تحذيرات في حالة وجود تعارض
- اقتراح أوقات بديلة

### 3. عرض تفاصيل الحجز

#### المعلومات المعروضة
- **تفاصيل الحجز**: التاريخ، الوقت، المدة
- **معلومات العميل**: الاسم، البريد الإلكتروني، الهاتف
- **معلومات الطاهي**: الاسم، التقييم، الخدمات
- **تفاصيل التسعير**: السعر الأساسي، الإضافات، الإجمالي
- **حالة الدفع**: معلومات الدفع والمعاملات
- **سجل التغييرات**: تاريخ التعديلات

#### الإجراءات المتاحة
- **تعديل الحجز**
- **قبول الحجز**
- **رفض الحجز**
- **إلغاء الحجز**
- **إكمال الحجز**
- **طباعة التفاصيل**

### 4. تعديل الحجز

#### قواعد التعديل
- يمكن تعديل الحجوزات في حالة "في الانتظار" أو "مقبول"
- لا يمكن تعديل الحجوزات المكتملة أو الملغية
- يتم إعادة فحص التعارض عند تغيير التاريخ أو الوقت
- يتم إشعار العميل والطاهي بالتغييرات

#### البيانات القابلة للتعديل
- التاريخ والوقت (مع فحص التعارض)
- عدد الساعات
- عدد الضيوف
- العنوان
- الملاحظات
- حالة الحجز
- حالة الدفع

### 5. إدارة حالات الحجز

#### حالات الحجز
| الحالة | الوصف | الإجراءات المتاحة |
|--------|-------|------------------|
| في الانتظار | حجز جديد ينتظر الموافقة | قبول، رفض، تعديل، إلغاء |
| مقبول | تم قبول الحجز من الطاهي | إكمال، إلغاء، تعديل |
| مرفوض | تم رفض الحجز | لا توجد إجراءات |
| ملغي من العميل | ألغاه العميل | لا توجد إجراءات |
| ملغي من الطاهي | ألغاه الطاهي | لا توجد إجراءات |
| مكتمل | تم تقديم الخدمة | عرض فقط |

#### تغيير الحالة
1. انتقل إلى تفاصيل الحجز
2. اختر الحالة الجديدة من القائمة
3. أضف سبب التغيير (اختياري)
4. انقر **حفظ التغييرات**

### 6. الإجراءات المجمعة

#### الإجراءات المتاحة
- **قبول متعدد**: قبول عدة حجوزات مرة واحدة
- **رفض متعدد**: رفض عدة حجوزات مع السبب
- **إلغاء متعدد**: إلغاء عدة حجوزات
- **تصدير البيانات**: تصدير الحجوزات المحددة

#### كيفية الاستخدام
1. حدد الحجوزات المطلوبة باستخدام صناديق الاختيار
2. اختر الإجراء من قائمة "الإجراءات المجمعة"
3. أضف أي ملاحظات مطلوبة
4. انقر **تنفيذ**

## فحص التوفر والتعارض

### نظام منع التعارض

#### القواعد الأساسية
1. **عدم التداخل**: لا يمكن حجز نفس الطاهي في أوقات متداخلة
2. **الفاصل الزمني**: فاصل 2 ساعة على الأقل بين الحجوزات
3. **ساعات العمل**: الحجز من 8 صباحاً إلى 10 مساءً فقط
4. **الحد الأقصى**: 12 ساعة كحد أقصى للحجز الواحد

#### أنواع التعارض
- **تداخل زمني**: حجزان في نفس الوقت
- **فاصل غير كافي**: أقل من ساعتين بين الحجوزات
- **خارج ساعات العمل**: حجز خارج الأوقات المسموحة

### فحص التوفر

#### الفحص التلقائي
- يتم فحص التوفر عند إدخال البيانات
- عرض رسائل تحذيرية فورية
- اقتراح أوقات بديلة
- منع حفظ الحجوزات المتعارضة

#### الفحص اليدوي
1. انتقل إلى **أدوات** > **فحص التوفر**
2. اختر الطاهي والتاريخ
3. أدخل الوقت وعدد الساعات
4. انقر **فحص التوفر**

## التقارير والإحصائيات

### التقارير المتاحة
- **تقرير الحجوزات اليومية**
- **تقرير أداء الطهاة**
- **تقرير الإيرادات**
- **تقرير حالات الإلغاء**
- **تقرير أوقات الذروة**

### الإحصائيات المباشرة
- عدد الحجوزات اليوم
- الحجوزات في الانتظار
- معدل القبول
- متوسط قيمة الحجز
- الطهاة الأكثر حجزاً

## استكشاف الأخطاء وإصلاحها

### المشاكل الشائعة

#### 1. خطأ في فحص التعارض
**الأعراض**: رسالة خطأ عند إنشاء حجز
**الحلول**:
- تحقق من صحة التاريخ والوقت
- تأكد من وجود فاصل زمني كافي
- تحقق من حالة الحجوزات الموجودة

#### 2. بطء في تحميل الصفحات
**الأعراض**: تأخير في عرض قائمة الحجوزات
**الحلول**:
- استخدم المرشحات لتقليل البيانات
- تحديث ذاكرة التخزين المؤقت
- تحسين استعلامات قاعدة البيانات

#### 3. مشاكل في الإشعارات
**الأعراض**: عدم وصول الإشعارات للعملاء
**الحلول**:
- تحقق من إعدادات البريد الإلكتروني
- فحص قوائم الحظر
- تحديث معلومات الاتصال

### رسائل الخطأ الشائعة

| رسالة الخطأ | السبب | الحل |
|-------------|-------|------|
| "تعارض في الحجز" | حجز متداخل مع حجز موجود | اختر وقت مختلف |
| "فاصل زمني غير كافي" | أقل من ساعتين بين الحجوزات | زيد الفاصل الزمني |
| "خارج ساعات العمل" | حجز خارج 8ص-10م | اختر وقت ضمن ساعات العمل |
| "الطاهي غير متاح" | الطاهي غير نشط أو محظور | اختر طاهي آخر |

## الإعدادات والتخصيص

### إعدادات النظام
- **الفاصل الزمني الأدنى**: تغيير الحد الأدنى للفاصل (افتراضي: 2 ساعة)
- **ساعات العمل**: تخصيص أوقات العمل المسموحة
- **الحد الأقصى للحجز**: تحديد أقصى مدة للحجز الواحد
- **فترة الحجز المسبق**: كم يوم مقدماً يمكن الحجز

### إعدادات الإشعارات
- **إشعارات البريد الإلكتروني**: تفعيل/إلغاء الإشعارات
- **إشعارات SMS**: إعداد الرسائل النصية
- **إشعارات التطبيق**: الإشعارات داخل التطبيق
- **قوالب الرسائل**: تخصيص نصوص الإشعارات

### إعدادات التقارير
- **التقارير التلقائية**: جدولة التقارير الدورية
- **المستلمين**: قائمة مستلمي التقارير
- **تنسيق التقارير**: PDF، Excel، أو CSV
- **فترات التقارير**: يومي، أسبوعي، شهري

## الأمان والصلاحيات

### مستويات الصلاحيات
- **مدير عام**: جميع الصلاحيات
- **مدير حجوزات**: إدارة الحجوزات فقط
- **موظف دعم**: عرض وتعديل محدود
- **مراجع**: عرض فقط

### سجل الأنشطة
- تسجيل جميع العمليات
- تتبع التغييرات
- معلومات المستخدم والوقت
- إمكانية البحث والتصفية

### النسخ الاحتياطي
- نسخ احتياطية تلقائية يومية
- إمكانية الاستعادة السريعة
- تشفير البيانات الحساسة
- اختبار دوري للنسخ الاحتياطية

## الدعم الفني

### طرق التواصل
- **البريد الإلكتروني**: support@yourcompany.com
- **الهاتف**: +966-XX-XXX-XXXX
- **الدردشة المباشرة**: متاحة 24/7
- **نظام التذاكر**: لمتابعة المشاكل

### الموارد المفيدة
- **دليل المستخدم الكامل**: رابط PDF
- **فيديوهات تعليمية**: قناة YouTube
- **الأسئلة الشائعة**: قاعدة المعرفة
- **منتدى المجتمع**: للنقاش والمساعدة

### ساعات الدعم
- **الدعم العادي**: الأحد-الخميس 9ص-5م
- **الدعم الطارئ**: 24/7 للمشاكل الحرجة
- **الصيانة المجدولة**: الجمعة 2ص-4ص

---

*آخر تحديث: ديسمبر 2025*
*الإصدار: 1.0*